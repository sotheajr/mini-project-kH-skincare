<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Cart</title>
    <!-- Bootstrap CSS -->

    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.1/css/all.min.css"
    />
    <link rel="shortcut icon" href="images/BgSub_images_logo.png" />
    <!--==import-poppins-font========-->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap"
      rel="stylesheet"
    />
    <!--==Font-Awesome-for-icons=====-->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.1/css/all.min.css"
    />
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <nav class="navigation">
      <!-- Logo -->
      <a class="logo" href="index.html">
        <img
          alt="logo"
          src="images/BgSub_images_logo.png"
          width="100px"
          height="200px"
        />
      </a>

      <!-- Menu Links -->
      <ul class="nav-links">
        <li><a href="index.html">Home</a></li>
        <li><a href="about.html">About</a></li>
        <li><a href="contacts.html">Contact</a></li>
        <li><a href="services.html">Services</a></li>
        <li><a href="portfolio.html">Portfolio</a></li>
      </ul>

      <!-- Search -->
      <form class="search-box">
        <input type="text" placeholder="Search Product's Here" required />
        <button>
          <i class="fa-solid fa-magnifying-glass"></i>
        </button>
      </form>

      <!-- Buttons -->
      <div class="nav-btns">
        <a class="nav-user" href="signUp.html">
          <i class="fa-regular fa-user"></i>
        </a>
        <a class="nav-cart" href="#">
          <i class="fa-solid fa-cart-shopping"></i>
        </a>
        <!-- Dark/Light Toggle -->
        <button id="theme-toggle">
          <i class="fa-solid fa-moon"></i>
        </button>
      </div>
    </nav>

    <div class="container my-4">
      <h2 class="mb-4">Your Cart</h2>
      <div id="cart-items" class="row g-3"></div>
      <p class="h5 mt-3">Total: $<span id="total-price">0</span></p>
      <div class="mt-3 d-flex gap-2">
        <button class="btn btn-secondary" id="clear-cart">Clear Cart</button>
        <a href="checkout_pay.html" class="btn btn-primary" id="go-checkout"
          >Go to Checkout</a
        >
      </div>
    </div>
    <footer>
      <div class="footer-container">
        <!--**comoany-box**-->
        <div class="footer-company-box">
          <!--logo-->
          <a class="footer-logo" href="indext.html"
            ><img src="images/BgSub_images_logo.png" alt="logo" width="100px"
          /></a>
          <!--details-->
          <p>
            Lorem ipsum dolor sit amet consectetur adipisicing elit. Quasi quas
            neque repudiandae nihil.
          </p>
          <!--social-box-->
          <div class="footer-social">
            <a href="#"><i class="fa-brands fa-facebook-f"></i></a>
            <a href="#"><i class="fa-brands fa-instagram"></i></a>
            <a href="#"><i class="fa-brands fa-twitter"></i></a>
            <a href="#"><i class="fa-brands fa-youtube"></i></a>
          </div>
        </div>
        <!--**link-box***-->
        <div class="footer-link-box">
          <strong>Main Link's</strong>
          <ul>
            <li><a href="#">Home</a></li>
            <li><a href="#">About</a></li>
            <li><a href="#">Contact</a></li>
            <li><a href="#">Services</a></li>
            <li><a href="#">Portfolio</a></li>
          </ul>
        </div>
        <!--**link-box***-->
        <div class="footer-link-box">
          <strong>External Link's</strong>
          <ul>
            <li><a href="#">Our Product's</a></li>
            <li><a href="#">Privacy Policy</a></li>
            <li><a href="#">Disclaimer</a></li>
            <li><a href="#">Trem's and Condition's</a></li>
          </ul>
        </div>
        <!--**link-box***-->
        <div class="footer-link-box">
          <strong>Our Product's</strong>
          <ul>
            <li><a href="#">Skin Care</a></li>
            <li><a href="#">Hair Care</a></li>
            <li><a href="#">Nail's Polish</a></li>
            <li><a href="#">Eye Liner's</a></li>
          </ul>
        </div>
      </div>

      <!--**bottom**********************-->
      <div class="footer-bottom">
        <span class="footer-owner">Made By Going-To Internet</span>
        <span class="copyright">&#169; Copyright 2022 - Going-To Internet</span>
      </div>
    </footer>
    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

    <script>
      let cart = JSON.parse(localStorage.getItem("cart")) || [];
      const cartItemsEl = document.getElementById("cart-items");
      const totalEl = document.getElementById("total-price");

      function renderCart() {
        cartItemsEl.innerHTML = "";
        let total = 0;

        cart.forEach((item, index) => {
          total += item.price * item.qty;

          cartItemsEl.innerHTML += `
      <div class="col-12 col-md-6">
        <div class="card mb-3">
          <div class="row g-0">
            <div class="col-4">
              <img src="${item.img}" class="img-fluid rounded-start" alt="${
            item.title
          }">
            </div>
            <div class="col-8">
              <div class="card-body">
                <h5 class="card-title">${item.title}</h5>
                <p class="card-text">Price: $${item.price.toFixed(2)}</p>
                <div class="mb-2">
                  Quantity: <input type="number" class="form-control d-inline-block w-auto" value="${
                    item.qty
                  }" min="1" onchange="updateQty(${index}, this.value)">
                </div>
                <button class="btn btn-sm btn-warning me-2" onclick="editItem(${index})">Edit</button>
                <button class="btn btn-sm btn-danger" onclick="removeItem(${index})">Delete</button>
              </div>
            </div>
          </div>
        </div>
      </div>
    `;
        });

        totalEl.textContent = total.toFixed(2);
        localStorage.setItem("cart", JSON.stringify(cart));
      }

      function removeItem(index) {
        if (confirm("Are you sure to remove this item?")) {
          cart.splice(index, 1);
          renderCart();
        }
      }

      function editItem(index) {
        const newQty = prompt("Enter new quantity:", cart[index].qty);
        if (newQty !== null) {
          let qtyNum = parseInt(newQty);
          if (qtyNum < 1) qtyNum = 1;
          cart[index].qty = qtyNum;
          renderCart();
        }
      }

      function updateQty(index, qty) {
        qty = parseInt(qty);
        if (qty < 1) qty = 1;
        cart[index].qty = qty;
        renderCart();
      }

      document
        .getElementById("clear-cart")
        .addEventListener("click", function () {
          if (confirm("Are you sure you want to clear the cart?")) {
            cart = [];
            renderCart();
          }
        });

      renderCart();
    </script>
  </body>
</html>
